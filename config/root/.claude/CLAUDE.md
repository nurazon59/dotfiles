# Claude設定

## 言語

- 日本語で話す・コメントも日本語
- コミット: `<type>(<scope>): <subject>`

## 開発ルール

- **Plan mode終了時**: 最新のdefault branchから新規ブランチを切って作業開始
- **TDD**: テスト先行 → 失敗確認 → 実装 → パス
- **Lint**: 変更時は必ず実行、`eslint-disable`等の無視コメント禁止
- **コメント**: whyのみ（what/how不要）
- **設定ファイル**: 変更禁止
- **失敗時**: 同じコマンドをリトライせず、原因を調べてから別アプローチを取る
- **ファイル操作**: 既存ファイルのEdit優先、Writeは新規ファイルが本当に必要な場合のみ
- **編集前確認**: ファイルパス・対象セクションの存在をRead/Grepで確認してから編集する。構造を仮定しない

## 作業の進め方

- 変更前に3〜5行で計画を示し、承認を待つ
- 完了時は必ず検証: 1) 変更ファイル再読で一貫性確認 2) テスト・ビルド実行 3) 元の要求との一致確認。3つ全て通るまで完了と言わない
- 質問を受けた際は返信だけをすること。作業をしてはならない

## 並列セッション

- 複数セッションで同一ファイルを同時編集しない
- 並列作業時はworktreeまたはファイル単位で分離し、競合を防ぐ
- 編集対象が他セッションと重なる可能性がある場合は確認を取る

## ファイル命名

- 既存プロジェクトの規則に従う
- Python/Go: `snake_case` / その他: `kebab-case`

## ツール

- **mise**: ランタイム管理、グローバルインストール禁止
- **gh**: PR/issue操作優先
- **git**: `git add .`禁止、ブランチは`nurazon59/`プレフィックス
- **検索**: gemini-search（Web）、context7（ライブラリドキュメント）、deepwiki（GitHub調査）
- **スキル**: available_skillsにマッチすれば黙って使用

## zzz/ディレクトリ

- 一時作業用（.gitignore済み）、Plan modeではsubagentsを5台以上走らせる

## worktree

- worktreeを用いる必要のあるときは.worktree(.gitignore済み)を使うこと

## OSSメモ

- ユーザーがOSS系のネタ・アイデアをメモしたいと言ったら → `nurazon59/oss-memo` repoにissueを作成

## Subagents活用（最重要）

### subagent vs 自分 判断基準

| 状況                                 | 判断         | 理由                           |
| ------------------------------------ | ------------ | ------------------------------ |
| 複数ファイル編集（2つ以上）          | **subagent** | 並列化でコンテキスト分離       |
| 探索的な調査（何がどこにあるか不明） | **subagent** | Explore agentに任せる          |
| 複数の独立タスクがある               | **subagent** | 並列実行                       |
| レビュー系作業                       | **subagent** | 専用agentの方が品質高い        |
| 単一ファイルの小さな変更（10行以下） | 自分         | 起動オーバーヘッドの方が大きい |
| 単一コマンド実行                     | 自分         | 投げるより速い                 |

### 並列起動パターン

1. **調査**: 「〇〇を調べる」が複数 → 各調査を別subagentに sonnetをつかう
2. **実装**: 複数ファイル編集 → ファイルごとにsubagent並列起動
3. **検証**: テスト・lint・型チェック → 並列実行
4. **レビュー**: 実装後 → code-reviewer/quality-fixer起動

## UI

UI作成時はUI心理学にのっとること
ユーザーにUIを説明する際はASCIIアートを用いること
